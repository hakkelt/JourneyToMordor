import{f as c,a as d,t as Ne}from"../chunks/Ch9GSn30.js";import{o as Pe}from"../chunks/Cu9z9-1Q.js";import{p as Je,s as a,t as D,a as Ue,e as Ye,c as t,$ as Oe,r as e,n as re,g as f,b as N,d as x}from"../chunks/D0sG4Gf8.js";import{d as Fe,s as m}from"../chunks/BVKB6R5f.js";import{i as _,s as Ie,a as le}from"../chunks/CifNh-sY.js";import{e as Ve}from"../chunks/DPdWQ3k2.js";import{h as Be,s as H,r as ie}from"../chunks/BXtuWJMv.js";import{u as qe,b as ne}from"../chunks/veJxXT5U.js";import{j as Ge,r as Ke,d as ze}from"../chunks/Dt4Og1kx.js";import{g as He}from"../chunks/BbvmAUKU.js";import{r as P}from"../chunks/C_Ou05uN.js";var Qe=c('<meta name="description" content="View and manage your Journey To Mordor data"/>'),We=c('<div><p class="text-sm font-medium text-slate-600">Email</p> <p class="text-slate-800"> </p></div>'),Xe=c('<div><p class="text-sm font-medium text-slate-600">Display Name</p> <p class="text-slate-800"> </p></div>'),Ze=c('<div class="rounded-lg border border-slate-200 bg-slate-50 p-4"><div class="space-y-2"><div class="flex items-start justify-between"><div><p class="text-sm font-medium text-slate-600">User ID</p> <p class="font-mono text-sm text-slate-800"> </p></div></div> <!> <!> <div><p class="text-sm font-medium text-slate-600">Email Verified</p> <p class="text-slate-800"> </p></div></div></div>'),et=c('<div class="rounded-lg border border-blue-200 bg-blue-50 p-4"><p class="text-blue-800">You are not signed in. Your data is stored locally in your browser only.</p></div>'),tt=c('<div><p class="text-sm font-medium text-slate-600">Date Range</p> <p class="text-slate-800"> </p></div>'),at=c('<div class="rounded border border-slate-200 bg-white p-3"><div class="flex items-start justify-between"><div><p class="font-medium text-slate-800"> </p> <p class="text-sm text-slate-600"> <!></p></div> <p class="text-xs text-slate-400"> </p></div></div>'),ot=c('<p class="mt-2 text-sm text-slate-500"> </p>'),st=c('<div class="mt-4"><h3 class="mb-2 text-lg font-semibold text-slate-800">Recent Entries (Last 5)</h3> <div class="space-y-2"></div> <!></div>'),rt=c('<button class="rounded-lg border-2 border-yellow-600 bg-white px-4 py-2 font-semibold text-yellow-700 transition hover:bg-yellow-100">Clear Local Data</button>'),lt=c('<div class="space-y-3"><p class="font-medium text-yellow-900">Are you sure? Type <code class="rounded bg-yellow-200 px-1">CLEAR</code> to confirm:</p> <input type="text" placeholder="Type CLEAR" class="w-full max-w-xs rounded-lg border border-yellow-300 px-4 py-2 focus:border-yellow-500 focus:ring-2 focus:ring-yellow-200 focus:outline-none"/> <div class="flex gap-3"><button class="rounded-lg bg-yellow-600 px-4 py-2 font-semibold text-white transition hover:bg-yellow-700">Confirm Clear</button> <button class="rounded-lg border border-slate-300 bg-white px-4 py-2 font-semibold text-slate-700 transition hover:bg-slate-50">Cancel</button></div></div>'),it=c('<button class="rounded-lg border-2 border-red-600 bg-white px-4 py-2 font-semibold text-red-700 transition hover:bg-red-100">Delete Account</button>'),nt=c('<div class="space-y-3"><p class="font-medium text-red-900">Are you absolutely sure? Type <code class="rounded bg-red-200 px-1">DELETE</code> to confirm:</p> <input type="text" placeholder="Type DELETE" class="w-full max-w-xs rounded-lg border border-red-300 px-4 py-2 focus:border-red-500 focus:ring-2 focus:ring-red-200 focus:outline-none"/> <div class="flex gap-3"><button class="rounded-lg bg-red-600 px-4 py-2 font-semibold text-white transition hover:bg-red-700">Confirm Delete</button> <button class="rounded-lg border border-slate-300 bg-white px-4 py-2 font-semibold text-slate-700 transition hover:bg-slate-50">Cancel</button></div></div>'),dt=c(`<div id="delete-account" class="rounded-lg border border-red-200 bg-red-50 p-6"><h3 class="mb-2 text-lg font-semibold text-red-900">Delete Account</h3> <p class="mb-4 text-sm text-red-800">This will permanently delete your account and all associated cloud data. Your local data
						will also be cleared. This action cannot be undone.</p> <!></div>`),ct=c(`<div class="rounded-lg border border-slate-200 bg-slate-50 p-6"><p class="text-slate-600">You need to be signed in to delete your account. Since you're not signed in, you can
						only clear your local data.</p></div>`),vt=c(`<div class="mx-auto max-w-4xl space-y-6"><div class="rounded-lg bg-white p-8 shadow-md"><h1 class="mb-6 font-serif text-4xl font-bold text-slate-800">My Data</h1> <section class="mb-8 space-y-4"><h2 class="font-serif text-2xl font-semibold text-slate-800">Account Information</h2> <!></section> <section class="mb-8 space-y-4"><h2 class="font-serif text-2xl font-semibold text-slate-800">Journey Data</h2> <div class="rounded-lg border border-slate-200 bg-slate-50 p-4"><div class="space-y-3"><div><p class="text-sm font-medium text-slate-600">Total Log Entries</p> <p class="text-2xl font-bold text-slate-800"> </p></div> <div><p class="text-sm font-medium text-slate-600">Unit Preference</p> <p class="text-slate-800"> </p></div> <div><p class="text-sm font-medium text-slate-600">Total Distance</p> <p class="text-slate-800"> </p></div> <!></div></div> <!></section> <section class="mb-8 space-y-4"><h2 class="font-serif text-2xl font-semibold text-slate-800">Export Your Data</h2> <div class="space-y-3 text-slate-700"><p><strong>Manual Backups & device transfer:</strong> For manually editing logs or moving
					data between devices, we recommend using the <strong>CSV Export</strong> feature found on
					the <a class="font-semibold text-pumpkin-600 hover:underline">Journey Logs</a> page.</p> <p><strong>GDPR Data Download:</strong> The button below allows you to download all your stored
					data in JSON format. This format is provided to comply with GDPR regulations mandating full
					data access portability.</p></div> <button class="rounded-lg bg-pumpkin-600 px-6 py-3 font-semibold text-white transition hover:bg-pumpkin-700">üì• Download Full Data (JSON)</button></section> <section class="mb-8"><a class="text-sm font-medium text-slate-500 hover:text-pumpkin-600 hover:underline">View Privacy Policy</a></section> <section class="space-y-6"><h2 class="font-serif text-2xl font-semibold text-slate-800">Data Management</h2> <div class="rounded-lg border border-yellow-200 bg-yellow-50 p-6"><h3 class="mb-2 text-lg font-semibold text-yellow-900">Clear Local Data</h3> <p class="mb-4 text-sm text-yellow-800">This will remove all journey data from your browser's local storage. If you're signed in,
					your cloud data will remain intact and will re-sync when you reload the page.</p> <!></div> <!></section> <div class="mt-8 border-t border-slate-200 pt-6"><a class="inline-block rounded-lg bg-slate-600 px-6 py-3 font-semibold text-white transition hover:bg-slate-700">‚Üê Back to Journey</a></div></div></div>`);function Dt(de,ce){Je(ce,!0);const u=()=>le(qe,"$user",Q),p=()=>le(Ge,"$journeyStore",Q),[Q,ve]=Ie();let S=N(!1),A=N(!1),R=N(""),$=N("");Pe(()=>{window.scrollTo(0,0)});async function ue(){if(u()){if(f(R)!=="DELETE"){alert("Please type DELETE to confirm");return}try{await ze(u()),alert("Account deleted successfully. Your local data has also been cleared."),x(S,!1),He(P("/"))}catch(o){o.code==="auth/requires-recent-login"?alert("For security reasons, this operation requires a recent login. Please sign out and sign in again before deleting your account."):(alert("Failed to delete account. Please try again later."),console.error(o))}}}function pe(){if(f($)!=="CLEAR"){alert("Please type CLEAR to confirm");return}Ke(),alert("Local data cleared successfully."),x(A,!1)}function me(){const o={user:u()?{uid:u().uid,email:u().email,displayName:u().displayName}:null,journeyData:p()},s=new Blob([JSON.stringify(o,null,2)],{type:"application/json"}),l=URL.createObjectURL(s),i=document.createElement("a");i.href=l,i.download=`journey-to-mordor-data-${new Date().toISOString().split("T")[0]}.json`,document.body.appendChild(i),i.click(),document.body.removeChild(i),URL.revokeObjectURL(l)}var J=vt();Be("1y1j3m6",o=>{var s=Qe();Ye(()=>{Oe.title="My Data - Journey To Mordor"}),d(o,s)});var W=t(J),U=a(t(W),2),be=a(t(U),2);{var fe=o=>{var s=Ze(),l=t(s),i=t(l),v=t(i),r=a(t(v),2),n=t(r,!0);e(r),e(v),e(i);var b=a(i,2);{var E=y=>{var h=We(),w=a(t(h),2),C=t(w,!0);e(w),e(h),D(()=>m(C,u().email)),d(y,h)};_(b,y=>{u().email&&y(E)})}var g=a(b,2);{var L=y=>{var h=Xe(),w=a(t(h),2),C=t(w,!0);e(w),e(h),D(()=>m(C,u().displayName)),d(y,h)};_(g,y=>{u().displayName&&y(L)})}var T=a(g,2),k=a(t(T),2),M=t(k,!0);e(k),e(T),e(l),e(s),D(()=>{m(n,u().uid),m(M,u().emailVerified?"Yes":"No")}),d(o,s)},xe=o=>{var s=et();d(o,s)};_(be,o=>{u()?o(fe):o(xe,!1)})}e(U);var Y=a(U,2),O=a(t(Y),2),X=t(O),F=t(X),Z=a(t(F),2),_e=t(Z,!0);e(Z),e(F);var I=a(F,2),ee=a(t(I),2),ge=t(ee,!0);e(ee),e(I);var V=a(I,2),te=a(t(V),2),ye=t(te);e(te),e(V);var he=a(V,2);{var we=o=>{var s=tt(),l=a(t(s),2),i=t(l);e(l),e(s),D((v,r)=>m(i,`${v??""}
								-
								${r??""}`),[()=>new Date(Math.min(...p().logs.map(v=>new Date(v.date).getTime()))).toLocaleDateString(),()=>new Date(Math.max(...p().logs.map(v=>new Date(v.date).getTime()))).toLocaleDateString()]),d(o,s)};_(he,o=>{p().logs.length>0&&o(we)})}e(X),e(O);var De=a(O,2);{var Ee=o=>{var s=st(),l=a(t(s),2);Ve(l,5,()=>p().logs.slice(0,5),r=>r.id,(r,n)=>{var b=at(),E=t(b),g=t(E),L=t(g),T=t(L,!0);e(L);var k=a(L,2),M=t(k),y=a(M);{var h=j=>{var se=Ne();D(()=>m(se,`- ${f(n).note??""}`)),d(j,se)};_(y,j=>{f(n).note&&j(h)})}e(k),e(g);var w=a(g,2),C=t(w);e(w),e(E),e(b),D(j=>{m(T,j),m(M,`${f(n).distance??""}
											${p().unit??""} `),m(C,`ID: ${f(n).id??""}`)},[()=>new Date(f(n).date).toLocaleDateString()]),d(r,b)}),e(l);var i=a(l,2);{var v=r=>{var n=ot(),b=t(n);e(n),D(()=>m(b,`... and ${p().logs.length-5} more entries`)),d(r,n)};_(i,r=>{p().logs.length>5&&r(v)})}e(s),d(o,s)};_(De,o=>{p().logs.length>0&&o(Ee)})}e(Y);var B=a(Y,2),q=a(t(B),2),ae=t(q),Le=a(t(ae),4);re(),e(ae),re(2),e(q);var Te=a(q,2);Te.__click=me,e(B);var G=a(B,2),ke=t(G);e(G);var K=a(G,2),z=a(t(K),2),Ce=a(t(z),4);{var je=o=>{var s=rt();s.__click=()=>x(A,!0),d(o,s)},Se=o=>{var s=lt(),l=a(t(s),2);ie(l);var i=a(l,2),v=t(i);v.__click=pe;var r=a(v,2);r.__click=()=>{x(A,!1),x($,"")},e(i),e(s),ne(l,()=>f($),n=>x($,n)),d(o,s)};_(Ce,o=>{f(A)?o(Se,!1):o(je)})}e(z);var Ae=a(z,2);{var Re=o=>{var s=dt(),l=a(t(s),4);{var i=r=>{var n=it();n.__click=()=>x(S,!0),d(r,n)},v=r=>{var n=nt(),b=a(t(n),2);ie(b);var E=a(b,2),g=t(E);g.__click=ue;var L=a(g,2);L.__click=()=>{x(S,!1),x(R,"")},e(E),e(n),ne(b,()=>f(R),T=>x(R,T)),d(r,n)};_(l,r=>{f(S)?r(v,!1):r(i)})}e(s),d(o,s)},$e=o=>{var s=ct();d(o,s)};_(Ae,o=>{u()?o(Re):o($e,!1)})}e(K);var oe=a(K,2),Me=t(oe);e(oe),e(W),e(J),D((o,s,l,i)=>{m(_e,p().logs.length),m(ge,p().unit==="km"?"Kilometers":"Miles"),m(ye,`${o??""}
							${p().unit??""}`),H(Le,"href",s),H(ke,"href",l),H(Me,"href",i)},[()=>p().logs.reduce((o,s)=>o+s.distance,0).toFixed(1),()=>P("/logs"),()=>P("/privacy"),()=>P("/")]),d(de,J),Ue(),ve()}Fe(["click"]);export{Dt as component};
