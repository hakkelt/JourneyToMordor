import{aa as m,ab as i,V as b,U as _,h,y as s,ac as y}from"./D0sG4Gf8.js";import{w as S}from"./DyQKHzWq.js";import{o as k,a as E}from"./Dt4Og1kx.js";function C(a,r,u=r){var o=new WeakSet;m(a,"input",async l=>{var e=l?a.defaultValue:a.value;if(e=c(a)?f(e):e,u(e),s!==null&&o.add(s),await i(),e!==(e=r())){var n=a.selectionStart,v=a.selectionEnd,d=a.value.length;if(a.value=e??"",v!==null){var t=a.value.length;n===v&&v===d&&t>d?(a.selectionStart=t,a.selectionEnd=t):(a.selectionStart=n,a.selectionEnd=Math.min(v,t))}}}),(h&&a.defaultValue!==a.value||b(r)==null&&a.value)&&(u(c(a)?f(a.value):a.value),s!==null&&o.add(s)),_(()=>{var l=r();if(a===document.activeElement){var e=y??s;if(o.has(e))return}c(a)&&l===f(a.value)||a.type==="date"&&!l&&!a.value||l!==a.value&&(a.value=l??"")})}function c(a){var r=a.type;return r==="number"||r==="range"}function f(a){return a===""?null:+a}const V=S(null);k(E,a=>{V.set(a)});export{C as b,V as u};
