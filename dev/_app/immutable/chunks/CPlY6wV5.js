import{ag as i,ah as m,a0 as _,_ as b,v as h,G as v,ai as y}from"./Cszbqulu.js";import{w as S}from"./C7-kx7IX.js";import{o as k,a as E}from"./D2aujusR.js";function C(a,r,u=r){var o=new WeakSet;i(a,"input",async l=>{var e=l?a.defaultValue:a.value;if(e=f(a)?c(e):e,u(e),v!==null&&o.add(v),await m(),e!==(e=r())){var n=a.selectionStart,s=a.selectionEnd,d=a.value.length;if(a.value=e??"",s!==null){var t=a.value.length;n===s&&s===d&&t>d?(a.selectionStart=t,a.selectionEnd=t):(a.selectionStart=n,a.selectionEnd=Math.min(s,t))}}}),(h&&a.defaultValue!==a.value||_(r)==null&&a.value)&&(u(f(a)?c(a.value):a.value),v!==null&&o.add(v)),b(()=>{var l=r();if(a===document.activeElement){var e=y??v;if(o.has(e))return}f(a)&&l===c(a.value)||a.type==="date"&&!l&&!a.value||l!==a.value&&(a.value=l??"")})}function f(a){var r=a.type;return r==="number"||r==="range"}function c(a){return a===""?null:+a}const V=S(null);k(E,a=>{V.set(a)});export{C as b,V as u};
